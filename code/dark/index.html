<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>How To Implement a Dark Theme Switch for your Site | mariosanchez.org</title>
    <meta name="author" content="Mario Sanchez Carrion">
    <meta name="description" content="Switch to dark theme for your site at a click of a button" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    <script src="/js/theme.js"></script>

    <link rel="stylesheet" href="/css/all.css">
    <link rel="stylesheet" href="/css/minimal.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel='stylesheet' href='//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.css'>
  </head>

  <body>
    <div class="header"></div>
    <a href="/">
      <div class="avatar">
        <a style="cursor:pointer;">
        <span class="icon" id="toggle-switch"> <i class="fas fa-sun fa-2x hd"></i></span><br />
        </a>
      </div>
    </a>
    <div class="centered logo">
      <a href="/"><img src="/img/mario-pix-dk.png" width="150" /></a>
    </div>
      <nav>
        <ul>
          <li>
            <a href="/coding/">code</a>
          </li>
          <li>
            <a href="/uses/">stack</a>
          </li>
          <li>
            <a href="/photos/">photos</a>
          </li>
        </ul>
      </nav>
    <div class="container">


<main id="main">
  <h1>How To Implement a Dark Theme Switch for your Site</h1>
  <p class="description">Switch to dark theme for your site at a click of a button</p>  
    <article id="content">
    <p><strong>Made with</strong>: <i class="fab fa-js"></i> JavaScript</p>
<p><a href="https://github.com/mariobox/dark">Source Files</a> | <a href="https://mariobox.github.io/dark">Demo</a></p>
<hr class="art" />
<p>We will implement a dark theme selector for our site that visitors can activate by clicking on an icon. We will discuss what we have to do to the HTML, CSS and JavaScript files that make up our site to make that happen.</p>
<h2 id="the-html">The HTML</h2>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="c">&lt;!--DOCTYPE--&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;script.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> 
      <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://kit.fontawesome.com/3fe16e504a.js&#34;</span> 
      <span class="na">crossorigin</span><span class="o">=</span><span class="s">&#34;anonymous&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;style.css&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Dark Theme<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;contact.html&#34;</span><span class="p">&gt;</span>Contact<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> |
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;about.html&#34;</span><span class="p">&gt;</span>About<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> 
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;toggle-switch&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;Toggle Dark Theme&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;fas fa-moon&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;toggle-switch&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>My Dark Mode Theme<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is a sample site to demo how to switch to dark mode.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>For this example, we will create three simple HTML pages: <code>index.html</code>, <code>about.html</code> and <code>contact.html</code>. The code above is the <code>index.html</code> page. At the top of each page, we will include a simple navigation menu next to which we will place a moon-shaped icon that users can click to turn on dark mode. Once in dark mode, the moon icon will switch to a sun icon, indicating that by clicking it the visitor can go back to the default light mode. Both the moon and the sun icons can be found in <a href="https://fontawesome.com">Fontawesome</a>.</p>
<h2 id="the-css">The CSS</h2>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">html</span> <span class="p">{</span>
  <span class="nv">--bck-color</span><span class="p">:</span> <span class="mh">#FFF</span><span class="p">;</span>
  <span class="nv">--ft-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
  <span class="nv">--link-color</span><span class="p">:</span> <span class="kc">blue</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">html</span><span class="p">.</span><span class="nc">dark</span> <span class="p">{</span>
  <span class="nv">--bck-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
  <span class="nv">--ft-color</span><span class="p">:</span> <span class="mh">#FFF</span><span class="p">;</span>
  <span class="nv">--link-color</span><span class="p">:</span> <span class="mh">#DDD</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">bck</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
  <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">ft</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
  <span class="k">max-width</span><span class="p">:</span> <span class="mi">40</span><span class="kt">em</span><span class="p">;</span>
  <span class="k">padding</span><span class="p">:</span> <span class="mi">5</span><span class="kt">%</span> <span class="mi">3</span><span class="kt">%</span><span class="p">;</span>
  <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="kc">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">a</span><span class="p">:</span><span class="nd">link</span><span class="o">,</span>
<span class="nt">a</span><span class="p">:</span><span class="nd">visited</span><span class="o">,</span>
<span class="nt">a</span><span class="p">:</span><span class="nd">active</span> <span class="p">{</span>
  <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">link</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>We will define some variables for the colors we want to use in our dark and light themes. To keep it simple, we will just focus on the background, the font and the link colors. We will define our variables in the <code>html</code> element and we&rsquo;ll then reference them in the <code>body</code> and <code>link</code> elements. We will also create a <code>dark</code> class for the <code>html</code> element that we will activate via JavaScript once a visitor clicks on the moon icon.</p>
<h2 id="the-javascript">The JavaScript</h2>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">DARK_MODE</span> <span class="o">=</span> <span class="s1">&#39;dark&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">LIGHT_MODE</span> <span class="o">=</span> <span class="s1">&#39;light&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">THEME</span> <span class="o">=</span> <span class="s1">&#39;mode&#39;</span><span class="p">;</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span>
  <span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">applyTheme</span><span class="p">();</span>
    <span class="kr">const</span> <span class="nx">toggleSwitch</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;toggle-switch&#39;</span><span class="p">);</span>
    <span class="nx">toggleSwitch</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">currentMode</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">THEME</span><span class="p">);</span>
      <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span>
        <span class="nx">THEME</span><span class="p">,</span> 
        <span class="nx">currentMode</span> <span class="o">===</span> <span class="nx">DARK_MODE</span> <span class="o">?</span> <span class="nx">LIGHT_MODE</span> <span class="o">:</span> <span class="nx">DARK_MODE</span>
      <span class="p">);</span>
      <span class="nx">applyTheme</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="kd">function</span> <span class="nx">applyTheme</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">html</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">currentMode</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">THEME</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">currentMode</span> <span class="o">===</span> <span class="nx">DARK_MODE</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">html</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">DARK_MODE</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;toggle-switch&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> 
      <span class="s1">&#39;&lt;i class=&#34;fas fa-sun&#34;&gt;&lt;/i&gt;&#39;</span><span class="p">;</span>
  <span class="p">}</span> 
  <span class="k">else</span> <span class="p">{</span>
    <span class="nx">html</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">DARK_MODE</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;toggle-switch&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> 
      <span class="s1">&#39;&lt;i class=&#34;fas fa-moon&#34;&gt;&lt;/i&gt;&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>Here&rsquo;s where the real magic happens. Since ours is a static site, we can&rsquo;t rely on the server to store our mode preferences. We need to do it in the visitor&rsquo;s browser, and for that we will make use of the <code>localStorage</code> DOM property.</p>
<p>Since the default mode is light, you&rsquo;ll get the site in light mode on your first visit. As soon as the page loads, an event listener on the <code>DOMContentLoaded</code> event triggers a callback function that checks the browser&rsquo;s <code>localStorage</code> property for any record of the site&rsquo;s mode. In our first visit there will be nothing stored there so the page will load in light mode.</p>
<p>Upon clicking in the moon icon, the value of the <code>THEME</code> const will change to <code>dark</code> and the key value pair will be stored in <code>localStorage</code> via the <code>localStorage.setItem(THEME, ...)</code> method. At the same time, the class of our <code>html</code> element will be set to <code>dark</code> and the <code>innerHTML</code> of the <code>span</code> containing the moon icon html code will change to display a sun icon instead. Clicking on the sun icon will take the visitor back to light mode by following the same process. The changes between light and dark mode are implemented via the  <code>applyTheme()</code> function.</p>
<p>Since the values stored in <code>localStorage</code> are presistent, as long as the visitor uses the same browser it will remember the chosen mode next time the site is visited. You can test this by navigating to the different pages of the site, or even closing and opening your browser. Here is a <a href="https://mariobox.github.io/dark">demo</a> where you can see this dark mode implementation in action.</p>

    </article>  
</main>
<p class="date">Last updated: Feb 23, 2020</p>

<br /><br />
  <p class="centered">
  <span class="small list">  
    <a href="https://www.linkedin.com/in/mariobox/" title="Linkedin"><i class="fab ft fa-linkedin fa-lg"></i></a>
    <a href="https://github.com/mariobox" title="Github"><i class="fab ft fa-github fa-lg"></i></a>
    <a href="https://instagram.com/_mario.codes" title="Instagram"><i class="fab ft fa-instagram fa-lg"></i></a>
    <a href="mailto:mario@mariosanchez.org" title="Email"><i class="fas ft fa-envelope fa-lg"></i></a>
  </span>
  </p>
  <p class="centered small">
    &copy; 2022 Mario Sanchez Carrion
  </p>
</div>
</body>
</html>


